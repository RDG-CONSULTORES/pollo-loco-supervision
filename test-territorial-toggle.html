<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Territorial Toggle</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
            padding: 20px;
        }
        .territorial-filter {
            background: rgba(242, 242, 247, 0.8);
            backdrop-filter: saturate(180%) blur(20px);
            border-radius: 13px;
            padding: 3px;
            display: flex;
            margin: 20px 0;
        }
        .territorial-option {
            flex: 1;
            background: transparent;
            border: none;
            padding: 8px 16px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 590;
            color: var(--ios-label);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            text-align: center;
            cursor: pointer;
        }
        .territorial-option.active {
            background: white;
            color: var(--ios-label);
            box-shadow: 0 3px 8px 0 rgba(0,0,0,0.12), 0 3px 1px 0 rgba(0,0,0,0.04);
        }
        .test-output {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>üó∫Ô∏è Territorial Toggle Test</h1>
    
    <div class="territorial-filter">
        <button class="territorial-option active" data-territorial="all">Todas</button>
        <button class="territorial-option" data-territorial="local">Locales</button>
        <button class="territorial-option" data-territorial="foranea">For√°neas</button>
    </div>
    
    <div class="test-output" id="test-output">
        <strong>Current Filter:</strong> all<br>
        <strong>Groups that would be shown:</strong> <span id="groups-shown">All groups</span>
    </div>

    <script>
        // Territorial mapping from the main dashboard
        const territorialMapping = {
            'GRUPO SALTILLO': {
                local: ['01 - Saltillo Centro', '02 - Saltillo Sur', '03 - Saltillo Norte'],
                foranea: ['57 - Harold R. Pape']
            },
            'GRUPO TEC': {
                local: ['14 - Tec de Monterrey', '15 - San Nicol√°s Tec'],
                foranea: ['58 - Guasave']
            },
            'GRUPO EXPO': {
                local: ['08 - Expo Guadalupe'],
                foranea: ['59 - Los Cabos']
            },
            'MATRIZ': {
                local: ['04 - Centro Monterrey', '05 - San Pedro', '06 - Santa Catarina'],
                foranea: []
            },
            'GRUPO PALMAS': {
                local: [],
                foranea: ['60 - Las Palmas', '61 - Playa del Carmen']
            }
        };

        function isLocalGroup(grupoName) {
            if (territorialMapping[grupoName]) {
                const mapping = territorialMapping[grupoName];
                return mapping.local.length > 0 && mapping.foranea.length === 0;
            }
            // Default classification for non-mixed groups
            return ['GRUPO APODACA', 'GRUPO CADEREYTA', 'GRUPO SAN NICOLAS'].includes(grupoName);
        }

        function isForaneaGroup(grupoName) {
            if (territorialMapping[grupoName]) {
                const mapping = territorialMapping[grupoName];
                return mapping.foranea.length > 0 && mapping.local.length === 0;
            }
            // Default classification for non-mixed groups
            return ['GRUPO DURANGO', 'GRUPO TORREON', 'GRUPO CHIHUAHUA'].includes(grupoName);
        }

        function isMixedGroup(grupoName) {
            if (territorialMapping[grupoName]) {
                const mapping = territorialMapping[grupoName];
                return mapping.local.length > 0 && mapping.foranea.length > 0;
            }
            return false;
        }

        function updateTest(territorial) {
            const output = document.getElementById('test-output');
            const groupsShown = document.getElementById('groups-shown');
            
            let groups = [];
            
            switch (territorial) {
                case 'local':
                    groups = Object.keys(territorialMapping).filter(group => 
                        isLocalGroup(group) || isMixedGroup(group)
                    );
                    groups = [...groups, 'GRUPO APODACA', 'GRUPO CADEREYTA', 'GRUPO SAN NICOLAS'];
                    break;
                case 'foranea':
                    groups = Object.keys(territorialMapping).filter(group => 
                        isForaneaGroup(group) || isMixedGroup(group)
                    );
                    groups = [...groups, 'GRUPO DURANGO', 'GRUPO TORREON', 'GRUPO CHIHUAHUA'];
                    break;
                default:
                    groups = ['All groups'];
                    break;
            }
            
            groupsShown.textContent = groups.join(', ');
            
            output.innerHTML = `
                <strong>Current Filter:</strong> ${territorial}<br>
                <strong>Groups that would be shown:</strong> <span id="groups-shown">${groups.join(', ')}</span><br>
                <strong>Mixed groups detected:</strong> ${Object.keys(territorialMapping).filter(isMixedGroup).join(', ')}
            `;
        }

        // Event listeners
        document.querySelectorAll('.territorial-option').forEach(option => {
            option.addEventListener('click', () => {
                // Remove active class from all options
                document.querySelectorAll('.territorial-option').forEach(opt => 
                    opt.classList.remove('active')
                );
                
                // Add active class to clicked option
                option.classList.add('active');
                
                // Update test display
                const territorial = option.dataset.territorial;
                updateTest(territorial);
                
                console.log('üó∫Ô∏è Territorial filter changed to:', territorial);
                
                // Haptic feedback simulation
                if ('vibrate' in navigator) {
                    navigator.vibrate(10);
                }
            });
        });

        // Test on load
        console.log('üß™ Territorial Toggle Test initialized');
        console.log('üìç Territorial mapping:', territorialMapping);
    </script>
</body>
</html>